<!doctype html>
<html lang="">

<head>
    <title>TITLE</title>

    META

    LINK
  

</head>

<div class="app">CONTENT</div>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-XXXXX-X', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript" charset="utf-8" src="assets/app.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
jQuery(document).ready(function($){
  //toggle 3d navigation
  $('.cd-3d-nav-trigger').on('click', function(){
    toggle3dBlock(!$('.cd-header').hasClass('nav-is-visible'));
  });

  //select a new item from the 3d navigation
  $('.cd-3d-nav').on('click', 'a', function(){
    var selected = $(this);
    selected.parent('li').addClass('cd-selected').siblings('li').removeClass('cd-selected');
    updateSelectedNav('close');
  });

  $(window).on('resize', function(){
    window.requestAnimationFrame(updateSelectedNav);
  });

  function toggle3dBlock(addOrRemove) {
    if(typeof(addOrRemove)==='undefined') addOrRemove = true; 
    $('.cd-header').toggleClass('nav-is-visible', addOrRemove);
    $('.cd-3d-nav-container').toggleClass('nav-is-visible', addOrRemove);
    $('main').toggleClass('nav-is-visible', addOrRemove).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
      //fix marker position when opening the menu (after a window resize)
      addOrRemove && updateSelectedNav();
    });
  }

  //this function update the .cd-marker position
  function updateSelectedNav(type) {
    var selectedItem = $('.cd-selected'),
      selectedItemPosition = selectedItem.index() + 1, 
      leftPosition = selectedItem.offset().left,
      backgroundColor = selectedItem.data('color'),
      marker = $('.cd-marker');

    marker.removeClassPrefix('color').addClass('color-'+ selectedItemPosition).css({
      'left': leftPosition,
    });
    if( type == 'close') {
      marker.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
        toggle3dBlock(false);
      });
    }
  }

  $.fn.removeClassPrefix = function(prefix) {
      this.each(function(i, el) {
          var classes = el.className.split(" ").filter(function(c) {
              return c.lastIndexOf(prefix, 0) !== 0;
          });
          el.className = $.trim(classes.join(" "));
      });
      return this;
  };
});
</script>
</body>
</html>
